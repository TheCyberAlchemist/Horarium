<!doctype html>
<html>
<head>
	<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/2.1.0/json2html.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script>
    let template = {'<>':'div','html':'${title} ${year}'};
	function asd(){
		// document.getElementsByClassName("response")[0].textContent = JSON.stringify(obj, undefined, 2);
	}
	function send_ajax(){
		var csrftoken = Cookies.get('csrftoken');
		function csrfSafeMethod(method) {
			// these HTTP methods do not require CSRF protection
			return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
		}
		// Ensure jQuery AJAX calls set the CSRF header to prevent security errors
		$.ajaxSetup({
			beforeSend: function(xhr, settings) {
				if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
					xhr.setRequestHeader("X-CSRFToken", csrftoken);
				}
			}
		});
		var locked = [
			{
				"Slot_id": "2",
				"Subject_event_id": "28",
				"Batch_id": null,
				"Resource_id": "1",
				"Slot_id_2": null,
				"locked": true,
				"link": "asd"
			},
			{
				"Slot_id": "7",
				"Subject_event_id": "29",
				"Batch_id": null,
				"Resource_id": "1",
				"Slot_id_2": null,
				"locked": true,
				"link": "None"
			}
		];
		// {
		// 	"Slot_id": "2",
		// 	"Subject_event_id": "28",
		// 	"Batch_id": null,
		// 	"Resource_id": "1",
		// 	"Slot_id_2": null,
		// 	"locked": true,
		// 	"link": "None"
		// }
		console.log({
				"locked_events":JSON.stringify(locked),
				"merging_events":{"asd":"asd"},
			})
		$.ajax({
			url:"../../algo3/",
			type: "post",
			data: {
				"locked_events":JSON.stringify(locked),
				"merging_subjects":{"asd":"asd"},
			},
			success: function (data){
				document.getElementsByClassName("response")[0].textContent = JSON.stringify(data, undefined, 2);
			}
		});
	}
    //native javascript
    
</script>
</head>
<body onload = "asd()">
<button onclick="send_ajax()">
	send_ajax()
</button>
<pre style="font-size: 18px;" class = "response">
</pre>
</body>
</html>

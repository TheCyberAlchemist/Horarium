<!doctype html>
<html>
<head>
	<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/2.1.0/json2html.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script>
	function send_ajax(){
		var csrftoken = Cookies.get('csrftoken');
		function csrfSafeMethod(method) {
			// these HTTP methods do not require CSRF protection
			return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
		}
		// Ensure jQuery AJAX calls set the CSRF header to prevent security errors
		$.ajaxSetup({
			beforeSend: function(xhr, settings) {
				if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
					xhr.setRequestHeader("X-CSRFToken", csrftoken);
				}
			}
		});
		var locked = [
			{
				"Slot_id": "2",
				"Subject_event_id": "28",
				"Batch_id": null,
				"Resource_id": "1",
				"Slot_id_2": null,
				"locked": true,
				"link": "asd"
			},
			{
				"Slot_id": "7",
				"Subject_event_id": "29",
				"Batch_id": null,
				"Resource_id": "1",
				"Slot_id_2": null,
				"locked": true,
				"link": "None"
			}
		];
		// {
		// 	"Slot_id": "2",
		// 	"Subject_event_id": "28",
		// 	"Batch_id": null,
		// 	"Resource_id": "1",
		// 	"Slot_id_2": null,
		// 	"locked": true,
		// 	"link": "None"
		// }
		//console.log({
		//		"locked_events":JSON.stringify(locked),
		//		"merging_events":{"asd":"asd"},
		//	})
		//API_URL = "../user_dash/1/student_edit_called/"
		API_URL = "../user_dash/1/update_student/"
		$.ajax({
			url:API_URL,
			type: "post",
			data: {
				"first_name": "Manav",
				"last_name": "manav",
				"email": "manav@mehta.com",
				"roll_no": "22",
				"Institute_id": 1,
				"Division_id": 4,
				"prac_batch": 7,
				"lect_batch": null
				
				//"pk":15,//for student
				//"pk":13,//for faculty
			},
			success: function (data){
				document.getElementsByClassName("response")[0].textContent = JSON.stringify(data, undefined, 2);
			}
		});
	}
    //native javascript
    
</script>
</head>
<body>
<button onclick="send_ajax()" class="button">
	send_ajax()
</button>
<pre style="font-size: 18px;" class = "response">
</pre>
</body>

</html>
